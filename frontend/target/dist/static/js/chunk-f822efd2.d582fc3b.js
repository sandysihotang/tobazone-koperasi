(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f822efd2"],{"6ee8":function(e,t,a){},"7a75":function(e,t,a){"use strict";var n=a("6ee8"),i=a.n(n);i.a},d770:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pa-md"},[a("q-table",{attrs:{dense:e.$q.screen.lt.md,title:"Daftar Laporan Tahunan",data:e.data,columns:e.columns,filter:e.filter,"row-key":"id",selection:"single",selected:e.selected},on:{"update:selected":function(t){e.selected=t}},scopedSlots:e._u([{key:"top-right",fn:function(){return[a("q-btn",{attrs:{color:"primary",icon:"fa fa-eye",disable:0===e.selected.length,size:"xs",label:"Lihat Laporan"},on:{click:function(t){e.lihatLaporan=!0}}}),a("q-btn",{attrs:{color:"primary",icon:"send",disable:0===e.selected.length||3===e.selected[0].status,size:"xs",label:"Kirim Pesan"},on:{click:function(t){e.pes=!0}}}),a("q-btn",{attrs:{color:"primary",icon:"edit",disable:0===e.selected.length||3===e.selected[0].status,size:"xs",label:"Ubah Status"},on:{click:e.changes}}),a("q-btn",{attrs:{color:"primary",icon:"fa fa-download",disable:0===e.selected.length,size:"xs",label:"Unduh Laporan"},on:{click:e.download}}),a("q-input",{staticStyle:{"margin-left":"15px"},attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Cari"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0}])}),a("q-dialog",{attrs:{"full-width":"","full-height":"",persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:e.lihatLaporan,callback:function(t){e.lihatLaporan=t},expression:"lihatLaporan"}},[a("isi-laporan",{attrs:{ss:e.selected}})],1),a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:e.change,callback:function(t){e.change=t},expression:"change"}},[a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v(" Ubah Status Laporan")])]),a("q-separator"),a("q-card-section",[a("q-select",{attrs:{outlined:"",options:e.options,dense:!0,label:"Tahun","options-dense":!1},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"event"}})]},proxy:!0}]),model:{value:e.status,callback:function(t){e.status=t},expression:"status"}})],1),a("q-card-section",[a("center",[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red",label:"Tutup"}}),e._v(" "),a("q-btn",{attrs:{color:"primary",label:"Ubah Status"},on:{click:e.ubahStatus}})],1)],1)],1)],1),a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:e.pes,callback:function(t){e.pes=t},expression:"pes"}},[a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("Kirim Pesan Untuk Koperasi")])]),a("q-separator"),a("q-card-section",[a("div",{staticClass:"q-pa-md",staticStyle:{"max-width":"300px"}},[a("q-input",{attrs:{filled:"",label:"Pesan",type:"textarea"},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1),a("br"),a("center",[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red",label:"Tutup"}}),e._v(" "),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"Kirim Pesan"},on:{click:e.kirimPesan}})],1)],1)],1)],1)],1)},i=[],s=(a("ace4"),a("d3b7"),a("3ca3"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("ddb0"),a("2b3d"),a("c1df")),o=a.n(s),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("Isi Laporan")])]),a("q-separator"),!0===e.pd?a("q-card-section",[a("embed",{staticClass:"full-width full-height",attrs:{src:"data:application/pdf;base64,"+this.nn}})]):a("q-card-section",e._l(e.nn,(function(t){return a("div",{key:t,staticClass:"desc"},[a("div",{domProps:{innerHTML:e._s(t)}})])})),0),a("q-card-section",[a("center",[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red",label:"Tutup"}})],1)],1)],1)],1)},l=[],c=a("1146"),d=a.n(c),p=a("c343"),u=a.n(p),h={props:["ss"],data:function(){return{pd:!1,nn:[]}},methods:{showLaporan:function(){var e=this;this.$q.loading.show(),this.$http.get("/api/getlaporanterkirim/".concat(this.ss[0].id),{headers:this.$auth.getHeader()}).then((function(t){e.pd=!1;var a=t.data;if(e.nn=[],"xls"===a.ext||"xlsx"===a.ext)for(var n=d.a.read(a.file,{type:"base64"}),i=0;i<n.SheetNames.length;i++){var s=n.Sheets[n.SheetNames[i]];e.nn.push(d.a.utils.sheet_to_html(s,{}))}else"pdf"===a.ext?(e.nn=a.file,e.pd=!0):u.a.convertToHtml({arrayBuffer:e.base64ToArrayBuffer(a.file)}).then((function(t){e.nn.push(t.value)}));e.$q.loading.hide()})).catch((function(t){e.$q.notify({type:"negative",message:"Terjadi kesalahan refresh (F5)"}),e.$q.loading.hide()}))},base64ToArrayBuffer:function(e){for(var t=window.atob(e),a=t.length,n=new Uint8Array(a),i=0;i<a;i++)n[i]=t.charCodeAt(i);return n.buffer}},created:function(){this.showLaporan()}},f=h,m=(a("7a75"),a("2877")),b=Object(m["a"])(f,r,l,!1,null,"377069e2",null),g=b.exports,v={components:{IsiLaporan:g},data:function(){var e=this;return{text:null,pes:!1,status:null,options:["Request","In Review","Approve"],change:!1,lihatLaporan:!1,selected:[],data:[],columns:[{name:"status",label:"status",align:"center",field:function(e){return 1===e.status?"Request":2===e.status?"In Riview":"Approve"},sortable:!0},{name:"koperasi",label:"Koperasi",align:"center",field:function(e){return e.nama_koperasi},sortable:!0},{name:"alamat",label:"Alamat Koperasi",align:"center",field:function(e){return e.alamat_koperasi},sortable:!0},{name:"file",label:"File",align:"center",field:function(e){return e.original_name},sortable:!0},{name:"laporan",label:"Tahun Laporan",align:"center",field:function(e){return e.tahun_laporan},sortable:!0},{name:"pengajuan",label:"Tanggal Pengiriman",align:"center",field:function(t){return e.getDate(t.created_at)},sortable:!0}],filter:""}},methods:{kirimPesan:function(){var e=this;this.$q.loading.show(),this.$http.post("/api/kirimpesanlaporan/".concat(this.selected[0].id),{text:this.text},{headers:this.$auth.getHeader()}).then((function(){e.$q.notify({type:"positive",message:"Berhasil mengirim pesan"}),e.$q.loading.hide()})).catch((function(){e.$q.notify({type:"negative",message:"Gagal mengirim pesan, refresh (F5)"}),e.$q.loading.hide()}))},ubahStatus:function(){var e=this;this.$q.loading.show(),this.$http.put("/api/changestatuslaporan/".concat(this.selected[0].id),{statusLaporan:this.status},{headers:this.$auth.getHeader()}).then((function(t){e.change=!1,e.$q.notify({type:"positive",message:"Berhasil mengubah Status"}),e.getData()})).catch((function(){e.$q.loading.hide()}))},changes:function(){this.status=1===this.selected[0].status?"Request":2===this.selected[0].status?"In Review":"Approve",this.change=!0},base64ToArrayBuffer:function(e){for(var t=window.atob(e),a=t.length,n=new Uint8Array(a),i=0;i<a;i++)n[i]=t.charCodeAt(i);return n.buffer},download:function(){var e=this;this.$q.loading.show(),this.$http.get("/api/downloadlaporankeuangan/".concat(this.selected[0].id),{headers:this.$auth.getHeader()}).then((function(t){e.downloadFile(e.base64ToArrayBuffer(t.data.file),"laporankeuangan",t.data.ext),e.$q.loading.hide()})).catch((function(){e.$q.notify({type:"negative",message:"Terjadi kesalahan refresh (F5)"}),e.$q.loading.hide()}))},downloadFile:function(e,t,a){if("xls"===a||"xlsx"===a){var n=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)return void window.navigator.msSaveOrOpenBlob(n);var i=window.URL.createObjectURL(n),s=document.createElement("a");s.href=i,s.download="".concat(t,".xlsx"),s.click(),setTimeout((function(){window.URL.revokeObjectURL(i)}),100),this.$swal({position:"center",type:"success",width:300,title:"Berhasil Mengexport Data",showConfirmButton:!1,timer:1500})}else if("pdf"===a){var o=new Blob([e],{type:"application/pdf"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)return void window.navigator.msSaveOrOpenBlob(o);var r=window.URL.createObjectURL(o),l=document.createElement("a");l.href=r,l.download="".concat(t,".pdf"),l.click(),setTimeout((function(){window.URL.revokeObjectURL(r)}),100),this.$swal({position:"center",type:"success",width:300,title:"Berhasil Mengexport Data",showConfirmButton:!1,timer:1500})}else{var c=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)return void window.navigator.msSaveOrOpenBlob(c);var d=window.URL.createObjectURL(c),p=document.createElement("a");p.href=d,p.download="".concat(t,".docx"),p.click(),setTimeout((function(){window.URL.revokeObjectURL(d)}),100),this.$swal({position:"center",type:"success",width:300,title:"Berhasil Mengexport Data",showConfirmButton:!1,timer:1500})}},getDate:function(e){return o.a.lang("id"),o()(e).format("dddd, Do MMMM YYYY")},getData:function(){var e=this;this.$http.get("/api/getlaporankoperasikabtoba",{headers:this.$auth.getHeader()}).then((function(t){var a=t.data;e.data=a.datatable,e.$q.loading.hide()})).catch((function(){e.$q.loading.hide()}))}},created:function(){this.$q.loading.show(),this.getData()}},w=v,q=Object(m["a"])(w,n,i,!1,null,"68d5527b",null);t["default"]=q.exports}}]);
//# sourceMappingURL=chunk-f822efd2.d582fc3b.js.map