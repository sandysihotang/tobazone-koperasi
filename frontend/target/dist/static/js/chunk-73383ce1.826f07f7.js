(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73383ce1"],{"0720":function(e,t,a){},"1bbd":function(e,t,a){},"5a6e":function(e,t,a){"use strict";var n=a("1bbd"),i=a.n(n);i.a},"78aa":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pa-md"},[a("q-table",{attrs:{dense:e.$q.screen.lt.md,title:"Laporan Terkirim Ke Dinas Koperasi",data:e.data,columns:e.columns,filter:e.filter,"row-key":"id",selection:"single",selected:e.selected},on:{"update:selected":function(t){e.selected=t}},scopedSlots:e._u([{key:"top-right",fn:function(){return[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("q-btn",{attrs:{color:"primary",icon:"fa fa-eye",disable:0===e.selected.length,size:"xs",label:"Lihat Laporan"},on:{click:function(t){e.lihatLaporan=!0}}})],1),a("div",{staticClass:"col"},[a("q-btn",{attrs:{color:"primary",icon:"edit",disable:0===e.selected.length||3===e.selected[0].status,size:"xs",label:"Edit Laporan"},on:{click:function(t){e.editLaporan=!0}}})],1),a("div",{staticClass:"col"},[a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Cari"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1)])]},proxy:!0}])}),a("q-dialog",{attrs:{"full-width":"","full-height":"",persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:e.lihatLaporan,callback:function(t){e.lihatLaporan=t},expression:"lihatLaporan"}},[a("isi-laporan",{attrs:{ss:e.selected}})],1),a("q-dialog",{attrs:{"full-width":"","full-height":"",persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:e.editLaporan,callback:function(t){e.editLaporan=t},expression:"editLaporan"}},[a("edit-laporan",{attrs:{ss:e.selected},on:{getData:e.getData}})],1)],1)},i=[],s=a("c1df"),r=a.n(s),o=a("1146"),l=a.n(o),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("Isi Laporan")])]),a("q-separator"),!0===e.pd?a("q-card-section",[a("embed",{staticClass:"full-width full-height",attrs:{type:"application/pdf",src:"data:application/pdf;base64,"+this.nn}})]):a("q-card-section",e._l(e.nn,(function(t){return a("div",{key:t,staticClass:"desc"},[a("div",{domProps:{innerHTML:e._s(t)}})])})),0),a("q-card-section",[a("center",[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red",label:"Tutup"}})],1)],1)],1)],1)},d=[],u=(a("ace4"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("c343")),p=a.n(u),f={props:["ss"],data:function(){return{pd:!1,nn:[]}},methods:{showLaporan:function(){var e=this;this.$q.loading.show(),this.$http.get("/api/getlaporanterkirim/".concat(this.ss[0].id),{headers:this.$auth.getHeader()}).then((function(t){e.pd=!1;var a=t.data;if("xls"===a.ext||"xlsx"===a.ext){var n=l.a.read(a.file,{type:"base64"});e.nn=[];for(var i=0;i<n.SheetNames.length;i++){var s=n.Sheets[n.SheetNames[i]];e.nn.push(l.a.utils.sheet_to_html(s,{}))}}else"pdf"===a.ext?(e.nn=a.file,e.pd=!0):p.a.convertToHtml({arrayBuffer:e.base64ToArrayBuffer(a.file)}).then((function(t){e.nn.push(t.value)}));e.$q.loading.hide()})).catch((function(){e.$q.notify({type:"negative",message:"Terjadi kesalahan refresh (F5)"}),e.$q.loading.hide()}))},base64ToArrayBuffer:function(e){for(var t=window.atob(e),a=t.length,n=new Uint8Array(a),i=0;i<a;i++)n[i]=t.charCodeAt(i);return n.buffer}},created:function(){this.showLaporan()}},h=f,m=(a("b4d3"),a("2877")),g=Object(m["a"])(h,c,d,!1,null,"f78308e6",null),v=g.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("Edit Pengiriman Laporan")])]),a("q-separator"),a("q-card-section",[a("q-file",{attrs:{filled:"","bottom-slots":"",type:"file",label:"Pilih File",counter:""},on:{input:e.changeFile},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"cloud_upload"},on:{click:function(e){e.stopPropagation()}}})]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){t.stopPropagation(),e.model=null}}})]},proxy:!0},{key:"hint",fn:function(){return[e._v(" File ")]},proxy:!0}]),model:{value:e.model,callback:function(t){e.model=t},expression:"model"}}),a("br"),a("q-select",{attrs:{outlined:"",options:e.options,dense:!0,label:"Tahun","options-dense":!1},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"event"}})]},proxy:!0}]),model:{value:e.tahunKirim,callback:function(t){e.tahunKirim=t},expression:"tahunKirim"}}),a("br"),a("div",{staticClass:"row"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"red",label:"Tutup"}}),a("q-btn",{attrs:{color:"primary","icon-right":"send",label:"Simpan"},on:{click:e.simpan}})],1)],1),a("q-separator"),!0===e.pd?a("q-card-section",[a("iframe",{staticClass:"full-width full-height",attrs:{src:"data:application/pdf;base64,"+this.nn}})]):a("q-card-section",e._l(e.nn,(function(t){return a("div",{key:t,staticClass:"desc"},[a("div",{domProps:{innerHTML:e._s(t)}})])})),0),a("q-separator")],1)],1)},y=[],q=a("ae70"),x=q["a"],w=(a("5a6e"),Object(m["a"])(x,b,y,!1,null,"68f7cff5",null)),k=w.exports,$={components:{IsiLaporan:v,EditLaporan:k},data:function(){var e=this;return{lihatLaporan:!1,filter:"",editLaporan:!1,selected:[],data:[],columns:[{name:"status",label:"Status",align:"center",field:function(e){return 1===e.status?"Menunggu Approval":2===e.status?"Sedang di Review":"Laporan Diterima"},sortable:!0},{name:"tahun",label:"Laporan Tahun",align:"center",field:function(e){return e.tahun_laporan},sortable:!0},{name:"dikirim",label:"Tanggal Pengiriman",align:"center",field:function(t){return e.getDate(t.created_at)},sortable:!0},{name:"file",label:"File",align:"center",field:function(e){return e.original_name},sortable:!0}]}},methods:{getDate:function(e){return r.a.lang("id"),r()(e).format("dddd, Do MMMM YYYY")},getData:function(){var e=this;this.$http.get("/api/getlaporanterkirimkoperasi",{headers:this.$auth.getHeader()}).then((function(t){e.data=t.data.datatable,e.$q.loading.hide()})).catch((function(){e.$q.notify({type:"negative",message:"Terjadi kesalahan refresh (F5)"}),e.$q.loading.hide()}))}},created:function(){this.$q.loading.show(),this.getData()}},_=$,L=Object(m["a"])(_,n,i,!1,null,"463ffde0",null);t["default"]=L.exports},ae70:function(e,t,a){"use strict";(function(e){a("ace4"),a("d3b7"),a("25f0"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7");var n=a("1146"),i=a.n(n),s=a("c343"),r=a.n(s);t["a"]={props:["ss"],data:function(){return{nn:[],tahunKirim:this.ss.tahun_laporan,model:null,options:[],excel:null,pd:!1}},methods:{simpan:function(){var e=this;this.$q.loading.show(),this.$http.put("/api/simpaneditlaporan/".concat(this.ss[0].id),this.useFormData(),{headers:this.$auth.getHeader()}).then((function(t){e.$q.notify({type:"positive",message:"Edit Laporan Berhasil Dilakukan"}),e.$emit("getData")})).catch((function(){e.$q.notify({type:"negative",message:"Terjadi kesalahan refresh (F5)"}),e.$q.loading.hide()}))},useFormData:function(){var e=new FormData;return this.excel&&e.append("files",this.excel),e.append("tahun",this.tahunKirim),e},changeFile:function(t){var a=this;if(this.excel=t,this.pd=!1,void 0===t)return this.$q.notify({type:"negative",message:"File Harus dengan Format xls / xlsx, Docx dan Pdf"}),void(this.model=null);if(this.$q.loading.show(),"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===t.type){var n=new FileReader;n.onloadend=function(e){var t=n.result;r.a.convertToHtml({arrayBuffer:t}).then((function(e){a.nn.push(e.value)})),a.change=!0},n.readAsArrayBuffer(t)}else if("application/pdf"===t.type){var s=new FileReader;s.readAsArrayBuffer(t),s.onload=function(t){var n=e.from(t.target.result).toString("base64");a.nn=n,a.pd=!0,a.change=!0}}else if("application/vnd.ms-excel"===t.type){var o=new FileReader;o.readAsArrayBuffer(t),o.onload=function(t){var n=e.from(t.target.result).toString("base64"),s=i.a.read(n,{type:"base64"});a.nn=[];for(var r=0;r<s.SheetNames.length;r++){var o=s.Sheets[s.SheetNames[r]];a.nn.push(i.a.utils.sheet_to_html(o,{}))}a.change=!0}}else this.$q.notify({type:"negative",message:"File Harus dengan Format xls / xlsx, Docx dan Pdf"}),this.model=null;this.$q.loading.hide()},base64ToArrayBuffer:function(e){for(var t=window.atob(e),a=t.length,n=new Uint8Array(a),i=0;i<a;i++)n[i]=t.charCodeAt(i);return n.buffer},showLaporan:function(){var e=this;this.$q.loading.show(),this.$http.get("/api/getlaporanterkirim/".concat(this.ss[0].id),{headers:this.$auth.getHeader()}).then((function(t){e.pd=!1;var a=t.data;if("xls"===a.ext||"xlsx"===a.ext){var n=i.a.read(a.file,{type:"base64"});e.nn=[];for(var s=0;s<n.SheetNames.length;s++){var o=n.Sheets[n.SheetNames[s]];e.nn.push(i.a.utils.sheet_to_html(o,{}))}}else"pdf"===a.ext?(e.nn=a.file,e.pd=!0):r.a.convertToHtml({arrayBuffer:e.base64ToArrayBuffer(a.file)}).then((function(t){e.nn.push(t.value)}));e.$q.loading.hide()})).catch((function(t){e.$q.notify({type:"negative",message:"Terjadi kesalahan refresh (F5)"}),e.$q.loading.hide()}))},getOptions:function(){var e=new Date,t=e.getFullYear()-10,a=t;this.options=[];while(a<t+20)this.options.push(a),a++;this.tahunKirim=this.ss[0].tahun_laporan}},created:function(){this.getOptions(),this.showLaporan()}}}).call(this,a("b639").Buffer)},b4d3:function(e,t,a){"use strict";var n=a("0720"),i=a.n(n);i.a}}]);
//# sourceMappingURL=chunk-73383ce1.826f07f7.js.map